{"version":3,"file":"InsertLink.d26e0088.js","sources":["../../../../frontend/node_modules/frappe-ui/src/components/Input.vue","../../../../frontend/node_modules/frappe-ui/src/components/TextEditor/InsertLink.vue"],"sourcesContent":["<template>\n  <label :class=\"[type == 'checkbox' ? 'flex' : 'block', $attrs.class]\">\n    <span\n      v-if=\"label && type != 'checkbox'\"\n      class=\"mb-2 block text-sm leading-4 text-gray-700\"\n    >\n      {{ label }}\n    </span>\n    <div\n      class=\"relative flex\"\n      :class=\"{ 'items-center': isNormalInput || type == 'select' }\"\n    >\n      <FeatherIcon\n        v-if=\"iconLeft && type != 'checkbox'\"\n        :name=\"iconLeft\"\n        class=\"absolute mx-2 h-4 w-4 text-gray-600\"\n        :class=\"{ 'mt-2': type == 'textarea' }\"\n      />\n      <input\n        v-if=\"isNormalInput\"\n        v-bind=\"inputAttributes\"\n        class=\"border-gray-400 placeholder-gray-500\"\n        ref=\"input\"\n        :class=\"[\n          {\n            'form-input block w-full': type != 'checkbox',\n            'form-checkbox': type == 'checkbox',\n            'pl-8': iconLeft && type != 'checkbox',\n          },\n          inputClass,\n        ]\"\n        :type=\"type || 'text'\"\n        :disabled=\"disabled\"\n        :placeholder=\"placeholder\"\n        :value=\"passedInputValue\"\n      />\n      <textarea\n        v-if=\"type === 'textarea'\"\n        v-bind=\"inputAttributes\"\n        :placeholder=\"placeholder\"\n        class=\"placeholder-gray-500\"\n        :class=\"[\n          'form-textarea block w-full resize-none',\n          inputClass,\n          {\n            'pl-8': iconLeft,\n          },\n        ]\"\n        ref=\"input\"\n        :value=\"passedInputValue\"\n        :disabled=\"disabled\"\n        :rows=\"rows\"\n      ></textarea>\n      <select\n        v-if=\"type === 'select'\"\n        v-bind=\"inputAttributes\"\n        class=\"form-select block w-full\"\n        :class=\"{ 'pl-8': iconLeft }\"\n        ref=\"input\"\n        :disabled=\"disabled\"\n      >\n        <option\n          v-for=\"option in selectOptions\"\n          :key=\"option.value\"\n          :value=\"option.value\"\n          :disabled=\"option.disabled || false\"\n          :selected=\"passedInputValue === option.value\"\n        >\n          {{ option.label }}\n        </option>\n      </select>\n    </div>\n    <span\n      v-if=\"label && type == 'checkbox'\"\n      class=\"ml-2 inline-block text-base leading-4\"\n    >\n      {{ label }}\n    </span>\n  </label>\n</template>\n\n<script>\nimport debounce from '../utils/debounce.ts'\nimport FeatherIcon from './FeatherIcon.vue'\n\nexport default {\n  name: 'Input',\n  inheritAttrs: false,\n  expose: ['getInputValue'],\n  components: { FeatherIcon },\n  props: {\n    label: {\n      type: String,\n    },\n    type: {\n      type: String,\n      default: 'text',\n      validator(value) {\n        let isValid = [\n          'text',\n          'number',\n          'checkbox',\n          'textarea',\n          'select',\n          'email',\n          'password',\n          'date',\n        ].includes(value)\n        if (!isValid) {\n          console.warn(`Invalid value \"${value}\" for \"type\" prop for Input`)\n        }\n        return isValid\n      },\n    },\n    modelValue: {\n      type: [String, Number, Boolean, Object, Array],\n    },\n    inputClass: {\n      type: [String, Array, Object],\n    },\n    debounce: {\n      type: Number,\n    },\n    options: {\n      type: Array,\n    },\n    disabled: {\n      type: Boolean,\n    },\n    rows: {\n      type: Number,\n      default: 3,\n    },\n    placeholder: {\n      type: String,\n    },\n    iconLeft: {\n      type: String,\n    },\n  },\n  emits: ['input', 'change', 'update:modelValue'],\n  methods: {\n    focus() {\n      this.$refs.input.focus()\n    },\n    blur() {\n      this.$refs.input.blur()\n    },\n    getInputValue(e) {\n      let $input = e ? e.target : this.$refs.input\n      let value = $input.value\n      if (this.type == 'checkbox') {\n        value = $input.checked\n      }\n      return value\n    },\n  },\n  computed: {\n    passedInputValue() {\n      if ('value' in this.$attrs) {\n        return this.$attrs.value\n      }\n      return this.modelValue || null\n    },\n    inputAttributes() {\n      let attrs = {}\n      let onInput = (e) => {\n        this.$emit('input', this.getInputValue(e))\n      }\n      if (this.debounce) {\n        onInput = debounce(onInput, this.debounce)\n      }\n      if (this.type == 'checkbox') {\n        attrs.checked = this.passedInputValue\n      }\n      return Object.assign(attrs, this.$attrs, {\n        onInput,\n        onChange: (e) => {\n          this.$emit('change', this.getInputValue(e))\n          this.$emit('update:modelValue', this.getInputValue(e))\n        },\n      })\n    },\n    selectOptions() {\n      return this.options\n        .map((option) => {\n          if (typeof option === 'string') {\n            return {\n              label: option,\n              value: option,\n            }\n          }\n          return option\n        })\n        .filter(Boolean)\n    },\n    isNormalInput() {\n      return [\n        'text',\n        'number',\n        'checkbox',\n        'email',\n        'password',\n        'date',\n      ].includes(this.type)\n    },\n  },\n}\n</script>\n<style>\n.form-select {\n  background-image: url(\"data:image/svg+xml;utf8,<svg fill='none' width='8' xmlns='http://www.w3.org/2000/svg' viewBox='-4 -2 16 16'><path d='M4.5 3.636 6.136 2l1.637 1.636M4.5 8.364 6.136 10l1.637-1.636' stroke='%23333C44' stroke-linecap='round' stroke-linejoin='round'/></svg>\");\n}\n</style>\n","<template>\n  <slot v-bind=\"{ onClick: openDialog }\"></slot>\n  <Dialog\n    :options=\"{ title: 'Set Link' }\"\n    v-model=\"setLinkDialog.show\"\n    @after-leave=\"reset\"\n  >\n    <template #body-content>\n      <FormControl\n        type=\"text\"\n        label=\"URL\"\n        v-model=\"setLinkDialog.url\"\n        @keydown.enter=\"(e) => setLink(e.target.value)\"\n      />\n    </template>\n    <template #actions>\n      <Button variant=\"solid\" @click=\"setLink(setLinkDialog.url)\">\n        Save\n      </Button>\n    </template>\n  </Dialog>\n</template>\n<script>\nimport Dialog from '../Dialog.vue'\nimport Button from '../Button.vue'\nimport Input from '../Input.vue'\n\nexport default {\n  name: 'InsertLink',\n  props: ['editor'],\n  components: { Button, Input, Dialog },\n  data() {\n    return {\n      setLinkDialog: { url: '', show: false },\n    }\n  },\n  methods: {\n    openDialog() {\n      let existingURL = this.editor.getAttributes('link').href\n      if (existingURL) {\n        this.setLinkDialog.url = existingURL\n      }\n      this.setLinkDialog.show = true\n    },\n    setLink(url) {\n      // empty\n      if (url === '') {\n        this.editor.chain().focus().extendMarkRange('link').unsetLink().run()\n      } else {\n        // update link\n        this.editor\n          .chain()\n          .focus()\n          .extendMarkRange('link')\n          .setLink({ href: url })\n          .run()\n      }\n\n      this.setLinkDialog.show = false\n      this.setLinkDialog.url = ''\n    },\n    reset() {\n      this.setLinkDialog = this.$options.data().setLinkDialog\n    },\n  },\n}\n</script>\n"],"names":["_sfc_main","FeatherIcon","value","isValid","e","$input","attrs","onInput","debounce","option","_createElementBlock","_normalizeClass","$props","_ctx","_hoisted_1","_toDisplayString","_createElementVNode","$options","_createBlock","_component_FeatherIcon","_mergeProps","_Fragment","_renderList","_hoisted_5","_hoisted_6","Button","Input","Dialog","existingURL","url","_renderSlot","_createVNode","_component_Dialog","$data","_cache","$event","_component_FormControl","_withKeys","_component_Button"],"mappings":"oMAqFA,MAAKA,EAAU,CACb,KAAM,QACN,aAAc,GACd,OAAQ,CAAC,eAAe,EACxB,WAAY,CAAEC,YAAAA,CAAa,EAC3B,MAAO,CACL,MAAO,CACL,KAAM,MACP,EACD,KAAM,CACJ,KAAM,OACN,QAAS,OACT,UAAUC,EAAO,CACf,IAAIC,EAAU,CACZ,OACA,SACA,WACA,WACA,SACA,QACA,WACA,MACF,EAAE,SAASD,CAAK,EAChB,OAAKC,GACH,QAAQ,KAAK,kBAAkBD,8BAAkC,EAE5DC,CACR,CACF,EACD,WAAY,CACV,KAAM,CAAC,OAAQ,OAAQ,QAAS,OAAQ,KAAK,CAC9C,EACD,WAAY,CACV,KAAM,CAAC,OAAQ,MAAO,MAAM,CAC7B,EACD,SAAU,CACR,KAAM,MACP,EACD,QAAS,CACP,KAAM,KACP,EACD,SAAU,CACR,KAAM,OACP,EACD,KAAM,CACJ,KAAM,OACN,QAAS,CACV,EACD,YAAa,CACX,KAAM,MACP,EACD,SAAU,CACR,KAAM,MACP,CACF,EACD,MAAO,CAAC,QAAS,SAAU,mBAAmB,EAC9C,QAAS,CACP,OAAQ,CACN,KAAK,MAAM,MAAM,MAAM,CACxB,EACD,MAAO,CACL,KAAK,MAAM,MAAM,KAAK,CACvB,EACD,cAAcC,EAAG,CACf,IAAIC,EAASD,EAAIA,EAAE,OAAS,KAAK,MAAM,MACnCF,EAAQG,EAAO,MACnB,OAAI,KAAK,MAAQ,aACfH,EAAQG,EAAO,SAEVH,CACR,CACF,EACD,SAAU,CACR,kBAAmB,CACjB,MAAI,UAAW,KAAK,OACX,KAAK,OAAO,MAEd,KAAK,YAAc,IAC3B,EACD,iBAAkB,CAChB,IAAII,EAAQ,CAAC,EACTC,EAAW,GAAM,CACnB,KAAK,MAAM,QAAS,KAAK,cAAc,CAAC,CAAC,CAC3C,EACA,OAAI,KAAK,WACPA,EAAUC,EAASD,EAAS,KAAK,QAAQ,GAEvC,KAAK,MAAQ,aACfD,EAAM,QAAU,KAAK,kBAEhB,OAAO,OAAOA,EAAO,KAAK,OAAQ,CACvC,QAAAC,EACA,SAAW,GAAM,CACf,KAAK,MAAM,SAAU,KAAK,cAAc,CAAC,CAAC,EAC1C,KAAK,MAAM,oBAAqB,KAAK,cAAc,CAAC,CAAC,CACtD,EACF,CACF,EACD,eAAgB,CACd,OAAO,KAAK,QACT,IAAKE,GACA,OAAOA,GAAW,SACb,CACL,MAAOA,EACP,MAAOA,CACT,EAEKA,CACR,EACA,OAAO,OAAO,CAClB,EACD,eAAgB,CACd,MAAO,CACL,OACA,SACA,WACA,QACA,WACA,MACF,EAAE,SAAS,KAAK,IAAI,CACrB,CACF,CACH,WA3MM,MAAM,gMAsEN,MAAM,qGAzEVC,EA6EQ,QAAA,CA7EA,MAAQC,EAAA,CAAAC,EAAA,MAAuC,WAAA,OAAA,QAAAC,EAAA,OAAO,KAAK,CAAA,IAEzDD,EAAA,OAASA,EAAI,MAAA,gBADrBF,EAKO,OALPI,EAKOC,EADFH,EAAK,KAAA,EAAA,CAAA,YAEVI,EA+DM,MAAA,CA9DJ,MAAML,EAAA,CAAA,gBACoB,CAAA,eAAAM,EAAA,eAAiBL,EAAI,MAAA,QAAA,CAAA,CAAA,IAGvCA,EAAA,UAAYA,EAAI,MAAA,gBADxBM,EAKEC,EAAA,OAHC,KAAMP,EAAQ,SACf,MAAKD,EAAA,CAAC,sCAAqC,CAAA,OACzBC,EAAI,MAAA,UAAA,CAAA,CAAA,sCAGhBK,EAAa,mBADrBP,EAiBE,QAjBFU,EAiBE,CAAA,IAAA,CAAA,EAfQH,EAAe,gBAAA,CACvB,OAAM,uCAAsC,4BAEiBL,EAAI,MAAA,2BAA6CA,EAAI,MAAA,WAAoC,OAAAA,EAAA,UAAYA,EAAI,MAAA,YAAuCA,EAAU,aADvN,IAAI,QASH,KAAMA,EAAI,MAAA,OACV,SAAUA,EAAQ,SAClB,YAAaA,EAAW,YACxB,MAAOK,EAAgB,wCAGlBL,EAAI,OAAA,gBADZF,EAgBY,WAhBZU,EAgBY,CAAA,IAAA,CAAA,EAdFH,EAAe,gBAAA,CACtB,YAAaL,EAAW,YACzB,OAAM,uBAAsB,0CAC4CA,EAAU,mBAAkCA,EAAQ,YAO5H,IAAI,QACH,MAAOK,EAAgB,iBACvB,SAAUL,EAAQ,SAClB,KAAMA,EAAI,4BAGLA,EAAI,OAAA,cADZF,EAiBS,SAjBTU,EAiBS,CAAA,IAAA,CAAA,EAfCH,EAAe,gBAAA,CACvB,MAAK,CAAC,2BAA0B,CAAA,OACdL,EAAQ,QAAA,CAAA,EAC1B,IAAI,QACH,SAAUA,EAAQ,mBAEnBF,EAQSW,EAAA,KAAAC,EAPUL,EAAa,cAAvBR,QADTC,EAQS,SAAA,CANN,IAAKD,EAAO,MACZ,MAAOA,EAAO,MACd,SAAUA,EAAO,UAAQ,GACzB,SAAUQ,EAAA,mBAAqBR,EAAO,KAEpC,EAAAM,EAAAN,EAAO,KAAK,EAAA,EAAAc,CAAA,+BAKbX,EAAA,OAASA,EAAI,MAAA,gBADrBF,EAKO,OALPc,EAKOT,EADFH,EAAK,KAAA,EAAA,CAAA,0CCjDd,MAAKZ,EAAU,CACb,KAAM,aACN,MAAO,CAAC,QAAQ,EAChB,WAAY,CAAEyB,OAAAA,EAAQ,MAAAC,EAAO,OAAAC,CAAQ,EACrC,MAAO,CACL,MAAO,CACL,cAAe,CAAE,IAAK,GAAI,KAAM,EAAO,CACzC,CACD,EACD,QAAS,CACP,YAAa,CACX,IAAIC,EAAc,KAAK,OAAO,cAAc,MAAM,EAAE,KAChDA,IACF,KAAK,cAAc,IAAMA,GAE3B,KAAK,cAAc,KAAO,EAC3B,EACD,QAAQC,EAAK,CAEPA,IAAQ,GACV,KAAK,OAAO,MAAK,EAAG,MAAK,EAAG,gBAAgB,MAAM,EAAE,UAAW,EAAC,IAAI,EAGpE,KAAK,OACF,MAAM,EACN,MAAM,EACN,gBAAgB,MAAM,EACtB,QAAQ,CAAE,KAAMA,EAAK,EACrB,IAAI,EAGT,KAAK,cAAc,KAAO,GAC1B,KAAK,cAAc,IAAM,EAC1B,EACD,OAAQ,CACN,KAAK,cAAgB,KAAK,SAAS,KAAM,EAAC,aAC3C,CACF,CACH,oGAhEEC,EAA8CjB,gCAArBI,EAAU,UAAA,CAAA,CAAA,CAAA,EACnCc,EAkBSC,EAAA,CAjBN,QAAS,CAAqB,MAAA,UAAA,EACtB,WAAAC,EAAA,cAAc,KAAd,sBAAAC,EAAA,KAAAA,EAAA,GAAAC,GAAAF,EAAA,cAAc,KAAIE,GAC1B,aAAalB,EAAK,QAER,iBACT,IAKE,CALFc,EAKEK,EAAA,CAJA,KAAK,OACL,MAAM,MACG,WAAAH,EAAA,cAAc,IAAd,sBAAAC,EAAA,KAAAA,EAAA,GAAAC,GAAAF,EAAA,cAAc,IAAGE,GACzB,UAAOD,EAAA,KAAAA,EAAA,GAAAG,EAASjC,GAAMa,EAAA,QAAQb,EAAE,OAAO,KAAK,EAAA,CAAA,OAAA,CAAA,6BAGtC,UACT,IAES,CAFT2B,EAESO,EAAA,CAFD,QAAQ,QAAS,QAAOJ,EAAA,KAAAA,EAAA,GAAAC,GAAAlB,EAAA,QAAQgB,EAAA,cAAc,GAAG,eAAG,IAE5D,GAF4D,QAE5D"}